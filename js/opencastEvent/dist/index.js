!function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=i(e),n=i(t);a.default.OpencastEvent=a.default.OpencastEvent||{},a.default.OpencastEvent.form=new class{jquery;max_width;slider;constructor(e){this.jquery=e,this.max_width=1e3,this.slider=null}initSettingsForm(e,t,i){this.max_width=e?parseInt(e,10):1e3,this.slider=this.initSlider(i),this.updateSlider(),this.checkContPropText(t);let a=this;$("input#prop_embed_size_width").on("change",(function(){console.log("HERE... prop_embed_size_width");let e=$(this).val();if(e=parseInt(e,10),a.keepAspectRatio()){let t=$("#xoce_preview_image").width();t=parseInt(t,10);let i=$("#xoce_preview_image").height();i=parseInt(i,10);let a=e/(t/i);$("#xoce_preview_image").height(a),$("input#prop_embed_size_height").val(a)}$("#xoce_preview_image").width(e),a.updateSlider()})),$("input#prop_embed_size_height").on("change",(function(){console.log("HERE... prop_embed_size_height");let e=$(this).val();if(e=parseInt(e,10),a.keepAspectRatio()){let t=$("#xoce_preview_image").width();t=parseInt(t,10);let i=$("#xoce_preview_image").height();i=parseInt(i,10);let n=e*(t/i);$("#xoce_preview_image").width(n),$("input#prop_embed_size_width").val(n),a.updateSlider()}$("#xoce_preview_image").height(e)}))}initSlider(e){let t=e,i=this;return t.onChange=function(e){i.sliderCallback(e,i)},$("#xoce_slider").ionRangeSlider(t),$("#xoce_slider").data("ionRangeSlider")}updateSlider(){let e=$("input#prop_embed_size_width").val();parseInt(e,10)>parseInt(this.max_width,10)&&(this.max_width=e);let t=e/this.max_width*100;this.slider.update({from:t})}sliderCallback(e,t){let i=$("#xoce_preview_image").width();i=parseInt(i,10);let a=$("#xoce_preview_image").height();a=parseInt(a,10);let n=i/a,l=e.from;l=parseInt(l,10);let s=t.max_width*(l/100),r=s/n;$("#xoce_preview_image").width(s),$("input#prop_embed_size_width").val(s),$("#xoce_preview_image").height(r),$("input#prop_embed_size_height").val(r)}keepAspectRatio(){return $("input#prop_embed_size_constr").is(":checked")}checkContPropText(e){if(e){let t=$("input#prop_embed_size_constr"),i=t.parent();!1!==i.text().indexOf("-cont_constrain_proportions-")&&(i.text(e),t.css("margin-left","5px"),t.appendTo(i))}}}(n.default),a.default.OpencastEvent.player=new class{jquery;constructor(e){this.jquery=e}init(e){e.maximize?this.setMaxSize():this.setSize(parseInt(e.width,10),parseInt(e.height,10))}setMaxSize(){$("#xoce_player_container").width("100%"),$("#xoce_player_container").height("0px");let e=$("#mainspacekeeper").outerHeight();e=parseInt(e,10);let t=$("main.il-layout-page-content").outerHeight();t=parseInt(t,10);let i=t-e;i>0?($("#xoce_player_container").height(i),$("main.il-layout-page-content").animate({scrollTop:$("#xoce_player_container").offset().top})):$("#xoce_player_container").height("100%")}setSize(e,t){$("#xoce_player_container").css("maxWidth",e+"px"),this.applyAspectRatio(e,t);let i=this;$(window).on("resize",(function(){i.applyAspectRatio(e,t)}))}applyAspectRatio(e,t){let i=e/t,a=$("#xoce_player_container").width();a=parseInt(a,10);let n=a/i;$("#xoce_player_container").height(n+"px")}}(n.default),a.default.OpencastEvent.table=new class{jquery;constructor(e){this.jquery=e}init(){this.initSelectedRow(),this.rowClickListener(),this.changeEventClickListener(),this.sortClickListener(),this.filterKeyListener()}initSelectedRow(){$(".xoce_table_row_selectable").each((function(e,t){1!=$(t).data("selectable")&&$(t).removeClass("xoce_table_row_selectable")})),$(".xoce_table_row_selectable").removeClass("selected"),$(`.xoce_table_row_selectable[data-event_id="${$("#event_id").val()}"]`).addClass("selected")}rowClickListener(){$(".xoce_table_row_selectable").on("click",(function(){let e=!1;$(this).hasClass("selected")&&(e=!0),$("#event_id").val(""),$(".xoce_table_row_selectable").removeClass("selected"),$(this).toggleClass("selected",!e),$(this).hasClass("selected")&&($("#event_id").val($(this).data("event_id")),$("#event_id_display").is(":visible")&&$("#event_id_display").text($(this).data("event_id")),$("#title").is(":visible")&&$("#title").text($(this).data("title")),$("#description").is(":visible")&&$("#description").text($(this).data("description")))}))}changeEventClickListener(){let e=this;$("#change_event").on("click",(function(t){$(this).is(":checked")?$("#event_table").show():($("#event_table").hide(),$("#event_id").val($("#current_event_id").val()),$("#event_id_display").text($("#current_event_id").val()),$("#title").text($("#current_title").val()),e.initSelectedRow())})),$("#change_event").is(":visible")&&($("#change_event").is(":checked")?$("#event_table").show():$("#event_table").hide())}sortClickListener(){$("#event_table table th.sortable-th > a").on("click",(function(e){e.preventDefault();let t=$(this).attr("href"),i=t.split("?")[1],a=t.split("?")[0],n=new URLSearchParams(i);n.has("cmd")&&"editEvent"==n.get("cmd")&&!n.has("change_event")&&n.append("change_event",1),n.has("offset")?n.set("offset",0):n.append("offset",0),window.open(a+"?"+n.toString(),"_self")}))}filterKeyListener(){$("#event_table .ilTableFilterInput .form-control").on("keydown",(function(e){if("Enter"===e.key)return $('input[name="cmd[applyFilterEdit]"]').is(":visible")?$('input[name="cmd[applyFilterEdit]"]').trigger("click"):$('input[name="cmd[applyFilter]"]').is(":visible")&&$('input[name="cmd[applyFilter]"]').trigger("click"),e.preventDefault(),!1}))}}(n.default)}(il,$);
